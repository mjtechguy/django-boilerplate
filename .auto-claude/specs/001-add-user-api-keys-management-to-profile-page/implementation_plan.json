{
  "feature": "Add User API Keys Management to Profile Page",
  "description": "Add a new 'API Keys' section to the user profile page allowing users to create, list, and revoke their own API keys using the existing backend endpoints.",
  "created_at": "2026-01-04T18:17:57.413Z",
  "updated_at": "2026-01-04T18:20:00.000Z",
  "status": "in_progress",
  "planStatus": "approved",
  "workflow_type": "development",
  "services_involved": [
    "frontend"
  ],
  "spec_file": "spec.md",
  "phases": [
    {
      "id": "phase-1",
      "name": "Frontend API Integration",
      "description": "Create the API types, hooks, and query key configuration for API key management",
      "status": "pending",
      "subtasks": [
        {
          "id": "1.1",
          "title": "Add API keys query keys to query-keys.ts",
          "description": "Add 'apiKeys' section to the query keys configuration in frontend/src/lib/api/query-keys.ts following the existing pattern for other resources.",
          "status": "completed",
          "files": [
            "frontend/src/lib/api/query-keys.ts"
          ],
          "estimated_minutes": 5,
          "notes": "Added 'apiKeys' section to query-keys.ts following the existing pattern with 'all' and 'list' query keys",
          "updated_at": "2026-01-04T18:22:20.255081+00:00"
        },
        {
          "id": "1.2",
          "title": "Create API keys types module",
          "description": "Create frontend/src/lib/api/api-keys/types.ts with Zod schemas for UserAPIKey, CreateAPIKeyInput, CreateAPIKeyResponse, and ListAPIKeysResponse matching the backend API responses.",
          "status": "completed",
          "files": [
            "frontend/src/lib/api/api-keys/types.ts"
          ],
          "estimated_minutes": 10,
          "notes": "Created frontend/src/lib/api/api-keys/types.ts with all required Zod schemas matching backend API responses. Includes userApiKeySchema, createApiKeyInputSchema, createApiKeyResponseSchema, listApiKeysResponseSchema, and revokeApiKeyResponseSchema. Follows existing patterns from social/types.ts and mfa/types.ts.",
          "updated_at": "2026-01-04T18:23:38.698496+00:00"
        },
        {
          "id": "1.3",
          "title": "Create API keys queries module",
          "description": "Create frontend/src/lib/api/api-keys/queries.ts with React Query hooks: useApiKeys (list), useCreateApiKey (mutation), useRevokeApiKey (mutation). Follow patterns from social/queries.ts.",
          "status": "completed",
          "files": [
            "frontend/src/lib/api/api-keys/queries.ts"
          ],
          "estimated_minutes": 15,
          "notes": "Created frontend/src/lib/api/api-keys/queries.ts with all required React Query hooks (useApiKeys, useCreateApiKey, useRevokeApiKey). Follows patterns from social/queries.ts and mfa/queries.ts. Includes proper query invalidation on mutations to keep the list in sync.",
          "updated_at": "2026-01-04T18:24:58.413503+00:00"
        },
        {
          "id": "1.4",
          "title": "Create API keys index module",
          "description": "Create frontend/src/lib/api/api-keys/index.ts that re-exports all types and queries for clean imports.",
          "status": "completed",
          "files": [
            "frontend/src/lib/api/api-keys/index.ts"
          ],
          "estimated_minutes": 3,
          "notes": "Created frontend/src/lib/api/api-keys/index.ts following the exact pattern from social/index.ts and mfa/index.ts. The file re-exports all types and queries from the api-keys module for clean imports.",
          "updated_at": "2026-01-04T18:25:54.144711+00:00"
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "UI Components",
      "description": "Create the UI components for API key management on the profile page",
      "status": "pending",
      "subtasks": [
        {
          "id": "2.1",
          "title": "Create ApiKeysCard component",
          "description": "Create frontend/src/components/profile/api-keys-card.tsx - main Card component that displays the API Keys section with a list of keys and action buttons. Include loading skeleton, empty state, and error handling.",
          "status": "completed",
          "files": [
            "frontend/src/components/profile/api-keys-card.tsx"
          ],
          "estimated_minutes": 25,
          "notes": "Created frontend/src/components/profile/api-keys-card.tsx with all required features: loading skeleton, empty state with create button, error handling with clear error message, list of API keys with Active/Revoked badges, and action buttons. Also created stub components for CreateApiKeyDialog and RevokeApiKeyDialog to avoid import errors. Follows existing patterns from social-accounts-list.tsx and profile page components.",
          "updated_at": "2026-01-04T18:28:11.046913+00:00"
        },
        {
          "id": "2.2",
          "title": "Create CreateApiKeyDialog component",
          "description": "Create frontend/src/components/profile/create-api-key-dialog.tsx - Dialog for creating a new API key with a name input field. After creation, display the key with copy-to-clipboard functionality and warning that it won't be shown again.",
          "status": "completed",
          "files": [
            "frontend/src/components/profile/create-api-key-dialog.tsx"
          ],
          "estimated_minutes": 30,
          "notes": "Created frontend/src/components/profile/create-api-key-dialog.tsx with all required features: form with name input using react-hook-form and zod validation, two-stage dialog (input form \u2192 success view), copy-to-clipboard functionality with visual feedback (Check icon), prominent warning message that key won't be shown again, prevention of accidental dialog closure when key is displayed, and consistent styling following MFA setup dialog pattern. Includes toast notifications for success/error states.",
          "updated_at": "2026-01-04T18:29:55.639398+00:00"
        },
        {
          "id": "2.3",
          "title": "Create RevokeApiKeyDialog component",
          "description": "Create frontend/src/components/profile/revoke-api-key-dialog.tsx - Confirmation dialog for revoking an API key with clear warning about the action being irreversible.",
          "status": "completed",
          "files": [
            "frontend/src/components/profile/revoke-api-key-dialog.tsx"
          ],
          "estimated_minutes": 15,
          "notes": "Created frontend/src/components/profile/revoke-api-key-dialog.tsx with all required features: confirmation dialog with clear warning about irreversible action, displays API key name and prefix for user verification, Cancel and Revoke buttons with destructive styling, loading state during mutation with animated Loader2 icon, toast notifications for success/error states, and closes dialog after successful revocation. Follows existing patterns from CreateApiKeyDialog and uses proper TypeScript types with error handling.",
          "updated_at": "2026-01-04T18:32:06.176311+00:00"
        },
        {
          "id": "2.4",
          "title": "Create ApiKeyListItem component",
          "description": "Create frontend/src/components/profile/api-key-list-item.tsx - Individual list item showing API key details (name, prefix, created date, status badge) with revoke action trigger.",
          "status": "completed",
          "files": [
            "frontend/src/components/profile/api-key-list-item.tsx"
          ],
          "estimated_minutes": 15,
          "notes": "Created frontend/src/components/profile/api-key-list-item.tsx component that displays individual API key details (name, prefix, created date, status badge) with revoke action trigger. Refactored ApiKeysCard to use the new list item component for cleaner code organization. Component follows existing patterns from profile page and accepts apiKey prop and onRevoke callback.",
          "updated_at": "2026-01-04T18:34:29.576970+00:00"
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Profile Page Integration",
      "description": "Integrate the API Keys section into the existing profile page",
      "status": "pending",
      "subtasks": [
        {
          "id": "3.1",
          "title": "Add API Keys section to profile page",
          "description": "Update frontend/src/routes/app/_layout/profile/index.tsx to import and render the ApiKeysCard component in the Security section, maintaining consistent styling with existing cards.",
          "status": "completed",
          "files": [
            "frontend/src/routes/app/_layout/profile/index.tsx"
          ],
          "estimated_minutes": 10,
          "notes": "Successfully integrated ApiKeysCard component into profile page. Added import statement and rendered component after Security section, maintaining consistent styling with other cards on the page.",
          "updated_at": "2026-01-04T18:36:08.823151+00:00"
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "Testing & Verification",
      "description": "Verify the implementation works correctly end-to-end",
      "status": "pending",
      "subtasks": [
        {
          "id": "4.1",
          "title": "Manual testing checklist",
          "description": "Verify: (1) API keys list displays correctly when empty and populated, (2) Creating a new key shows the full key once with copy button, (3) Revoking a key shows confirmation and updates the list, (4) Revoked keys show correct status badge, (5) Error states are handled gracefully, (6) Loading states display correctly.",
          "status": "pending",
          "files": [],
          "estimated_minutes": 20,
          "notes": ""
        },
        {
          "id": "4.2",
          "title": "Run existing backend tests",
          "description": "Run pytest backend/api/tests/test_api_keys.py to ensure backend API functionality works correctly.",
          "status": "pending",
          "files": [],
          "estimated_minutes": 5,
          "notes": ""
        },
        {
          "id": "4.3",
          "title": "Run TypeScript type checking",
          "description": "Run pnpm tsc in frontend directory to ensure no TypeScript errors in the new code.",
          "status": "pending",
          "files": [],
          "estimated_minutes": 5,
          "notes": ""
        }
      ]
    }
  ],
  "dependencies": {
    "1.2": [
      "1.1"
    ],
    "1.3": [
      "1.1",
      "1.2"
    ],
    "1.4": [
      "1.2",
      "1.3"
    ],
    "2.1": [
      "1.4"
    ],
    "2.2": [
      "1.4"
    ],
    "2.3": [
      "1.4"
    ],
    "2.4": [
      "1.4"
    ],
    "3.1": [
      "2.1",
      "2.2",
      "2.3",
      "2.4"
    ],
    "4.1": [
      "3.1"
    ],
    "4.2": [],
    "4.3": [
      "3.1"
    ]
  },
  "total_estimated_minutes": 158,
  "notes": [
    "Backend API endpoints already exist and are tested - no backend changes required",
    "Follow existing patterns in frontend/src/lib/api/ for API module structure",
    "Use existing UI components (Card, Dialog, Button, Badge) for consistency",
    "The API key is only shown once at creation - must implement copy functionality",
    "Use sonner toast for success/error notifications",
    "Use lucide-react icons consistent with the rest of the profile page"
  ],
  "final_acceptance": [
    "Users can view their API keys list on the profile page",
    "Users can create new API keys with optional custom names",
    "Newly created keys display the full key once with copy functionality",
    "Users can revoke API keys with confirmation dialog",
    "Revoked keys are visually distinguished from active keys",
    "All operations show appropriate loading states and toast notifications"
  ],
  "qa_status": {
    "status": "pending",
    "tests_passed": "",
    "issues": ""
  },
  "last_updated": "2026-01-04T18:36:08.823160+00:00"
}