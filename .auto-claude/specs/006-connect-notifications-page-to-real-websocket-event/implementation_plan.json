{
  "feature": "Connect Notifications Page to Real WebSocket Events",
  "description": "Replace the mock notification data in the Notifications page with real-time updates using the existing WebSocket infrastructure and orgEvents pattern.",
  "created_at": "2026-01-04T18:24:34.812Z",
  "updated_at": "2026-01-04T19:07:18.188Z",
  "status": "in_progress",
  "planStatus": "in_progress",
  "workflow_type": "development",
  "services_involved": [
    "frontend"
  ],
  "spec_file": "spec.md",
  "overview": "Replace mock notification data in the Notifications page with real-time updates from the existing WebSocket infrastructure. The ws-context.tsx already manages notifications state and provides markAsRead/markAllAsRead methods - the page just needs to consume this context instead of using hardcoded data.",
  "phases": [
    {
      "id": "phase-1",
      "name": "Connect to WebSocket Context",
      "description": "Replace mock data with real notifications from WebSocket context",
      "subtasks": [
        {
          "id": "1.1",
          "title": "Import and use useWebSocket hook in notifications page",
          "description": "Remove the hardcoded mock notifications array and use the useWebSocket() hook to get notifications, unreadCount, and connection status from the WebSocket context",
          "files": [
            "frontend/src/routes/app/_layout/notifications/index.tsx"
          ],
          "status": "completed",
          "notes": "Successfully removed hardcoded mock notifications array and connected to WebSocket context. The notifications page now uses useWebSocket() hook to get notifications, unreadCount, and notificationStatus from the WebSocket context.",
          "updated_at": "2026-01-04T19:12:12.091822+00:00"
        },
        {
          "id": "1.2",
          "title": "Map notification format for UI display",
          "description": "The WebSocket context provides notifications with {id, title, body, timestamp, read} format. Map 'body' to 'message' for UI display and add 'type' field support. Create helper function to format timestamp as relative time (e.g., '5 min ago')",
          "files": [
            "frontend/src/routes/app/_layout/notifications/index.tsx"
          ],
          "status": "completed",
          "notes": "Successfully implemented notification format mapping. Created formatRelativeTime() helper to convert timestamps to relative time strings (e.g., '5 min ago', 'Just now'). Created mapNotificationForUI() function to map WebSocket format {body, timestamp} to UI format {message, time}. Added type field support with default value 'info'. The notifications page now properly displays WebSocket notifications with user-friendly relative timestamps.",
          "updated_at": "2026-01-04T19:13:51.756596+00:00"
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Wire Up Action Buttons",
      "description": "Connect UI action buttons to WebSocket context methods",
      "subtasks": [
        {
          "id": "2.1",
          "title": "Connect Mark as Read button",
          "description": "Wire the 'Mark as read' button on individual notifications to the markAsRead(id) method from WebSocket context",
          "files": [
            "frontend/src/routes/app/_layout/notifications/index.tsx"
          ],
          "status": "completed",
          "notes": "Successfully wired the 'Mark as read' button to the markAsRead(id) method from WebSocket context. The button now calls markAsRead(notification.id) when clicked, properly updating the notification's read status. Implementation follows existing code patterns and includes proper TypeScript typing.",
          "updated_at": "2026-01-04T19:15:42.756882+00:00"
        },
        {
          "id": "2.2",
          "title": "Connect Mark All Read button",
          "description": "Wire the 'Mark all read' header button to the markAllAsRead() method from WebSocket context",
          "files": [
            "frontend/src/routes/app/_layout/notifications/index.tsx"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "id": "2.3",
          "title": "Add delete notification functionality",
          "description": "Implement removeNotification method in ws-context.tsx and wire the trash button to remove individual notifications from the list",
          "files": [
            "frontend/src/lib/websocket/ws-context.tsx",
            "frontend/src/routes/app/_layout/notifications/index.tsx"
          ],
          "status": "pending",
          "notes": ""
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Connection Status & Empty States",
      "description": "Add visual feedback for connection status and empty notification states",
      "subtasks": [
        {
          "id": "3.1",
          "title": "Add connection status indicator",
          "description": "Show a small status badge indicating WebSocket connection state (connected/connecting/disconnected/error) so users understand if real-time updates are active",
          "files": [
            "frontend/src/routes/app/_layout/notifications/index.tsx"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "id": "3.2",
          "title": "Handle empty notifications state",
          "description": "Show a friendly empty state when there are no notifications, with appropriate messaging",
          "files": [
            "frontend/src/routes/app/_layout/notifications/index.tsx"
          ],
          "status": "pending",
          "notes": ""
        }
      ]
    },
    {
      "id": "phase-4",
      "name": "Testing",
      "description": "Add tests to verify the integration works correctly",
      "subtasks": [
        {
          "id": "4.1",
          "title": "Add unit tests for notifications page",
          "description": "Create tests that verify: rendering with mock WebSocket context, mark as read functionality, mark all as read, delete notification, empty state display",
          "files": [
            "frontend/src/routes/app/_layout/notifications/index.test.tsx"
          ],
          "status": "pending",
          "notes": ""
        },
        {
          "id": "4.2",
          "title": "Verify TypeScript compilation and linting",
          "description": "Run TypeScript compiler and ESLint to ensure no type errors or linting issues were introduced",
          "files": [],
          "status": "pending",
          "notes": ""
        }
      ]
    }
  ],
  "qa_signoff": {
    "status": "pending",
    "tests_passed": "",
    "issues": ""
  },
  "final_acceptance": [],
  "estimated_effort": "2-3 hours",
  "last_updated": "2026-01-04T19:15:42.756893+00:00"
}